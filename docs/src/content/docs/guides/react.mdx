---
title: Using with React
description: Learn how to use Genshi with React
sidebar:
  order: -1
---

import { Code, TabItem, Tabs } from "@astrojs/starlight/components";

Genshi comes with an official React integration that allows you to use Genshi with React.

## Installation

You can install the React integration using your favorite package manager.

<Tabs syncKey="package-manager">
  <TabItem label="npm">
    <Code code="npm install @genshi/react" lang="bash" frame="code" />
  </TabItem>
  <TabItem label="yarn">
    <Code code="yarn add @genshi/react" lang="bash" frame="code" />
  </TabItem>
  <TabItem label="pnpm">
    <Code code="pnpm install @genshi/react" lang="bash" frame="code" />
  </TabItem>
</Tabs>

## Usage

To use Genshi with React, you need to create a store using the `createStore` function from the `@genshi/react` package.

The React integration provides a single `createStore` function that provides bindings to work with React components and lifecycle.

Otherwise, this binding re-exports everything from the core package.

### Creating our store

First, let's create a store with an initial state.

```ts
import { createStore } from "@genshi/react";

const [store, useStore] = createStore({
  count: 0,
});
```

The `createStore` function returns a tuple with an instance of `Store` class and the `useStore` hook.

Now, we can define our actions and effects.

### Defining actions

Let us define an action to increment the count, using the store we created above.

```ts
const increment = store.action("increment", (state) => ({
  ...state,
  count: state.count + 1,
}));
```

Here, we are using the `action` method on the store instance to define an action named `increment`. The action takes the current state as an argument and returns the new state.

### Defining effects

Let us define an effect to increment the count every second.

```ts
const tick = store.effect("tick", ({ dispatch }) => {
  setInterval(() => {
    dispatch(increment);
  }, 1000);
});
```

The `effect` method on the store instance is used to define an effect named `tick`. The effector function provides many properties to ease managing effects. One such property is the `dispatch` method.

Here, we are using the `setInterval` function to dispatch the `increment` action - that we created earlier - every second.

### Using the store in a component

Now, let's create a React component that uses the store we created above.

```tsx
function Counter() {
  const [count, dispatch] = useStore((s) => s.count);

  useEffect(() => {
    dispatch(tick);
  }, []);

  const handleIncrement = () => {
    dispatch(increment);
  };

  return (
    <>
      <button onClick={handleIncrement}>Increment</button>
      <p>The count is: {count}</p>
    </>
  );
}
```

### Dealing with payloads

A common use case is to pass a payload to an action or an effect. Genshi comes with first-class support for payloads.

First, let's button and a handler to add `10` to the count in our component.

```diff lang="tsx" collapse={1-10, }
function Counter() {
  const [count, dispatch] = useStore((s) => s.count);

  useEffect(() => {
    dispatch(tick);
  }, []);

  const handleIncrement = () => {
    dispatch(increment);
  };

+  const handleAdd = () => {
+    dispatch(add, 10)
+  }

  return (
    <>
      <button onClick={handleIncrement}>Increment</button>
+      <button onClick={handleAdd}>Add 10</button>
      <p>The count is: {count}</p>
    </>
  );
}
```

Here, we are using the `dispatch` method to dispatch the `add` action with a payload of `10`. We also need to define the `add` action by creating a new definition.

```ts
const add = store.action("add", (state, payload) => ({
  ...state,
  count: state.count + payload,
}));
```
